# スマートフォン壁紙設定ガイド

## ✅ 実装済み機能

スマートフォン壁紙の設定機能は以下のように実装されています：

### 設定方法

1. **設定アプリを開く**
   - スマートフォンのホーム画面で「設定」をタップ

2. **「画面表示と明るさ」を選択**
   - 設定画面内から「画面表示と明るさ」をタップ

3. **「ロック画面の壁紙」を選択**
   - 「画面表示と明るさ」内から「ロック画面の壁紙」をタップ

4. **壁紙を選択**
   - 以下のいずれかの方法で壁紙を指定：
     - **ファイルから選択**: 「画像を選択」ボタンをタップしてデバイスから画像をアップロード
     - **URLから設定**: URLを入力して壁紙を設定

5. **サイズ制限に注意**
   - 画像サイズは **700KB以内** である必要があります
   - 大きな画像は自動的にBase64エンコードされて保存されます

### 対応画像形式

- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)
- GIF (.gif)

## 🔧 トラブルシューティング

### 壁紙が反映されない場合

**原因と対策**:

1. **ファイルサイズが大きすぎる**
   - 画像を圧縮して700KB以下にしてください
   - オンライン画像圧縮ツールを使用: https://compressor.io

2. **キャッシュをクリア**
   - 設定アプリを再度開いて、壁紙設定に戻る
   - または、ブラウザのキャッシュをクリア（開発者ツール > キャッシュをクリア）

3. **ローカルストレージの確認**
   - ブラウザの開発者ツール > Storage > LocalStorage
   - `lockScreenImage` キーが存在するか確認

### URLから設定できない場合

**原因と対策**:

1. **URLが正しいか確認**
   - 完全な URL を入力してください（例: `https://example.com/image.jpg`）
   - `http://` または `https://` で始まっていることを確認

2. **CORS問題**
   - 外部URLの場合、CORS（Cross-Origin Resource Sharing）ポリシーが問題になる可能性があります
   - その場合は、ファイルから直接アップロードしてください

3. **画像の可用性**
   - URLが外部のサーバーを指している場合、そのサーバーがオンラインであることを確認

## 💡 ベストプラクティス

### 推奨される壁紙サイズ

異なるデバイスに対応するため、以下のサイズを推奨します：

- **一般的なスマートフォン**: 1080 x 1920 px
- **タブレット**: 1440 x 2560 px
- **Web版（縦向き）**: 1080 x 1920 px

### 推奨ファイルサイズ

- **JPEG**: 50KB ～ 300KB
- **PNG**: 100KB ～ 500KB
- **WebP**: 30KB ～ 200KB（最も効率的）

## 🎨 カスタマイズオプション

### 背景色の調整

ロック画面の背景色を変更する場合は、`SmartphoneOS.tsx` で以下を編集：

```tsx
// SmartphoneOS.tsx の 313行目付近
if (activeTheme === 'dark') {
  document.documentElement.style.backgroundColor = '#1a1a1a';
} else {
  document.documentElement.style.backgroundColor = '#f2f2f7';
}
```

### プレビューの確認

設定画面内で、以下のプレビューエリアで壁紙が正しく表示されているか確認できます：

```
┌─────────────────┐
│ 壁紙プレビュー   │  ← ここで設定した壁紙が表示されます
│ (9:16 アスペクト) │
└─────────────────┘
```

## 📱 モバイルデバイス固有の問題

### iOSでの設定

- iOS版では、ローカルストレージに保存された壁紙データをロック画面に適用するには、専用のAPI呼び出しが必要です
- 現在の実装ではWeb版でのみ完全にサポートされています

### Androidでの設定

- Androidの場合、Capacitorを通じて`Settings`プラグインを使用すれば、ロック画面の壁紙を直接設定できます

設定例（将来の拡張用）:
```typescript
import { Settings } from '@capacitor/settings';

await Settings.set({
  group: 'com.example.app',
  key: 'lockScreenImage',
  value: base64ImageData
});
```

## 📞 サポート

壁紙設定に関する問題や提案がある場合は、プロジェクトメンテナーまでお問い合わせください。

---

**最終更新**: 2026年1月23日
